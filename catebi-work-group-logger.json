{
  "updatedAt": "2025-11-28T10:56:48.000Z",
  "createdAt": "2025-11-28T05:51:29.120Z",
  "id": "ruk1fJ3VKzawxKOD",
  "name": "Catebi Work Group Logger",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        0
      ],
      "id": "6f9d9102-407a-4a94-aa08-abe84e0bb13f",
      "name": "Telegram Trigger",
      "webhookId": "ba95c4ca-da79-477e-9450-871e7b0edb7f",
      "credentials": {
        "telegramApi": {
          "id": "tcX20TpSwtOgHBGq",
          "name": "Peredast"
        }
      }
    },
    {
      "parameters": {
        "language": "python",
        "pythonCode": "from datetime import datetime, timezone\n\nitems_out = []\n\nfor item in items:\n    data = item.get(\"json\", {})\n\n    upd = (\n        data.get(\"message\")\n        or data.get(\"edited_message\")\n        or data.get(\"channel_post\")\n        or data.get(\"edited_channel_post\")\n    )\n\n    if not upd:\n        continue\n\n    chat = upd.get(\"chat\", {}) or {}\n    user = upd.get(\"from\", {}) or {}\n\n    unix_date = upd.get(\"date\")\n    date_iso = (\n        datetime.fromtimestamp(unix_date, tz=timezone.utc).isoformat()\n        if unix_date else None\n    )\n\n    reply_to_msg = upd.get(\"reply_to_message\")\n    reply_to_id = reply_to_msg[\"message_id\"] if reply_to_msg else None\n\n    # Extract attachments\n    attachments = []\n\n    # Photo (largest size)\n    photos = upd.get(\"photo\") or []\n    if isinstance(photos, list) and photos:\n        p = photos[-1]\n        attachments.append({\n            \"kind\": \"photo\",\n            \"file_id\": p.get(\"file_id\"),\n            \"file_unique_id\": p.get(\"file_unique_id\"),\n            \"file_size\": p.get(\"file_size\"),\n            \"width\": p.get(\"width\"),\n            \"height\": p.get(\"height\"),\n            \"mime_type\": None,\n            \"file_name\": None,\n        })\n\n    # Document\n    doc = upd.get(\"document\")\n    if doc:\n        attachments.append({\n            \"kind\": \"document\",\n            \"file_id\": doc.get(\"file_id\"),\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        208,
        0
      ],
      "id": "308beba8-6569-4d77-8821-cebef4ca3af4",
      "name": "Code in Python (Beta)"
    }
  ],
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Code in Python (Beta)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "3028bdac-a38d-49e0-b988-065953bcf6f1",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-11-28T05:51:29.128Z",
      "createdAt": "2025-11-28T05:51:29.128Z",
      "role": "workflow:owner",
      "workflowId": "ruk1fJ3VKzawxKOD",
      "projectId": "jnu5GnxkoXUPZEif"
    }
  ],
  "activeVersion": null,
  "tags": []
}